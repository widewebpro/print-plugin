{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assetbundles/printplugin/src/js/CreatePDFService/fetchTemplateAndSettingsService.js","webpack:///./src/assetbundles/printplugin/src/js/CreatePDFService/CreatePDFService.js","webpack:///./src/assetbundles/printplugin/src/js/CreatePDFService/list-pdfs-page__create-file.js","webpack:///./src/assetbundles/printplugin/src/js/CreatePDFService/fixPreviewSize.js","webpack:///./src/assetbundles/printplugin/src/js/CreatePDFService/outputs-page__template-preview.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","fetchTemplateAndSettingsService","id","a","fetch","then","response","text","JSON","parse","catch","error","console","templateAndSettings","fetchNewTemplate","getParams","template","CreatePDFService","this","_options","orientation","unit","format","options","size","width","height","printContainer","document","querySelector","innerHTML","trim","allowTaint","useCORS","html2canvas","canvas","imgData","toDataURL","pdf","jspdf","jsPDF","pageWidth","internal","pageSize","getWidth","pageHeight","getHeight","imageWidth","imageHeight","ratio","addImage","save","extra_canvas","createElement","setAttribute","getContext","drawImage","jpeg","addEventListener","getElementById","pdfsList","PDFService","getTemplateAndSettings","event","target","classList","contains","add","dataset","html","settings","setOptions","createPDF","remove","e","log","createJPEG","downloadLink","href","click","fixPreviewSize","blockId","container","inner","firstChild","containerWidth","offsetWidth","innerWidth","scale","style","transform","viewContainer","allFieldSelects","getElementsByTagName","onSelectInput","checkedSelect","selectName","closest","textareaValue","outputs","reduce","acc","select","stringify","querySelectorAll","forEach","textarea","textareaName","onTextareaInput","getTemplate","innerText","backgroundImage"],"mappings":"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","file":"js/PrintPlugin.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([12,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const fetchTemplateAndSettingsService = async (id) => {\n  const templateAndSettings = await fetch(\n    `/actions/print-plugin/default/get-html?id=${ id }`\n  )\n  .then(response => response.text())\n  .then(result => JSON.parse(result))\n  .catch(error => console.error('error', error))\n\n  return templateAndSettings\n}\n\nexport const fetchNewTemplate = async (getParams) => {\n  const template = await fetch(\n    `/actions/print-plugin/default/get-html?${getParams}`\n  )\n  .then(response => response.text())\n  .then(result => JSON.parse(result))\n  .catch(error => console.error('error', error))\n\n  return template\n}","import html2canvas from 'html2canvas'\n\nexport default class CreatePDFService {\n  constructor() {\n    this._options = {\n      orientation: 'portrait', // \"portrait\" or \"landscape\"\n      unit: 'cm', // \"mm\", \"cm\", \"m\", \"in\" or \"px\"\n      format: 'a4', // a0 - a10\n    }\n  }\n\n  setOptions(options) {\n    if (options?.format === 'cm' || options?.format === 'px') {\n      this._options = {\n        unit: options.format,\n        orientation: +JSON.parse(options?.size)?.width < +JSON.parse(options?.size)?.height\n          ? 'portrait' : 'landscape',\n        format: [\n          +JSON.parse(options?.size)?.width,\n          +JSON.parse(options?.size)?.height,\n        ]\n      }\n    } else {\n      this._options = {\n        format: JSON.parse(options?.size)?.format\n      }\n    }\n  }\n\n  async createPDF(template) {\n    const printContainer = document.querySelector('.pdf-container-by-print')\n    printContainer.innerHTML = template.trim()\n\n    const options = {\n      allowTaint: true,\n      useCORS: true\n    }\n\n    await html2canvas(printContainer, options).then(canvas => {\n      const imgData = canvas.toDataURL(\"image/jpeg\",1)\n      const pdf = new window.jspdf.jsPDF(this._options)\n      const pageWidth = pdf.internal.pageSize.getWidth()\n      const pageHeight = pdf.internal.pageSize.getHeight()\n      const imageWidth = canvas.width\n      const imageHeight = canvas.height\n\n      const ratio = imageWidth/imageHeight >= pageWidth/pageHeight ? pageWidth/imageWidth : pageHeight/imageHeight\n      pdf.addImage(imgData, 'JPEG', 0, 0, imageWidth * ratio, imageHeight * ratio)\n      pdf.save(\"pdf-file.pdf\")\n\n      document.querySelector('.pdf-container-by-print').innerHTML = ''\n    })\n    return true\n  }\n\n  async createJPEG(template) {\n    const printContainer = document.querySelector('.pdf-container-by-print')\n    printContainer.innerHTML = template.trim()\n\n    const options = {\n      allowTaint: true,\n      useCORS: true\n    }\n\n    const jpeg = await html2canvas(printContainer, options, options.width, options.height).then(canvas => {\n      if (this._options.unit === 'px') {\n        const extra_canvas = document.createElement(\"canvas\")\n        let factorWidth = 1\n        let factorHeight = 1\n\n        extra_canvas.setAttribute('width',this._options.format[0] * factorWidth)\n        extra_canvas.setAttribute('height',this._options.format[1] * factorHeight)\n        const ctx = extra_canvas.getContext('2d')\n        ctx.drawImage(canvas,\n          0, 0, canvas.width, canvas.height,\n          0, 0, this._options.format[0] * factorWidth, this._options.format[1] * factorHeight\n        )\n\n        return extra_canvas.toDataURL(\"image/jpeg\", 1)\n      } else {\n        return canvas.toDataURL(\"image/jpeg\", 1)\n      }\n    })\n\n    document.querySelector('.pdf-container-by-print').innerHTML = ''\n    return jpeg\n  }\n}","import { fetchTemplateAndSettingsService } from './fetchTemplateAndSettingsService'\nimport CreatePDFService from './CreatePDFService'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (document.getElementById('pdfs-list')) {\n    const pdfsList = document.getElementById('pdfs-list')\n\n    const PDFService = new CreatePDFService\n\n    const getTemplateAndSettings = async (id) => {\n      const getTemplateAndSettings = await fetchTemplateAndSettingsService(id)\n      return getTemplateAndSettings || {}\n    }\n\n    pdfsList.addEventListener('click', event => {\n      if (event.target.classList.contains('create-pdf')) {\n        try {\n          event.target.classList.add('--disabled')\n\n          getTemplateAndSettings(event.target.dataset.id)\n          .then(({ html = `<h1>Undefined template</h1>`, settings = {} }) => {\n            PDFService.setOptions(settings)\n\n            PDFService.createPDF(html).then(() => {\n              event.target.classList.remove('--disabled')\n            })\n          })\n        } catch (e) {\n          console.log('Error!!! ', e)\n          event.target.classList.remove('--disabled')\n        }\n      } else if (event.target.classList.contains('create-jpeg')) {\n        try {\n          event.target.classList.add('--disabled')\n\n          getTemplateAndSettings(event.target.dataset.id)\n          .then(({ html = `<h1>Undefined template</h1>`, settings = {} }) => {\n            PDFService.setOptions(settings)\n\n            PDFService.createJPEG(html).then(jpeg => {\n              const downloadLink = document.getElementById(`download-link-${ event.target.dataset.id }`)\n              downloadLink.href = jpeg\n              downloadLink.click()\n              event.target.classList.remove('--disabled')\n            })\n          })\n        } catch (e) {\n          console.log('Error!!! ', e)\n          event.target.classList.remove('--disabled')\n        }\n      }\n\n    })\n  }\n})\n\n","const fixPreviewSize = blockId => {\n  const container = document.getElementById(blockId)\n  const inner = container.firstChild\n\n  const containerWidth = container.offsetWidth\n  const innerWidth = inner.offsetWidth\n\n  if (innerWidth > containerWidth) {\n    const scale = containerWidth / innerWidth\n    inner.style.transform = `scale(${ scale })`\n  }\n}\n\nexport default fixPreviewSize","import { fetchTemplateAndSettingsService, fetchNewTemplate } from './fetchTemplateAndSettingsService'\nimport fixPreviewSize from './fixPreviewSize'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (document.getElementById('template-redactor-view')) {\n    const viewContainer = document.getElementById('template-redactor-view')\n    const allFieldSelects = [...document.getElementsByTagName('select')]\n\n    const onSelectInput = async (checkedSelect) => {\n      if (checkedSelect.value === 'custom') {\n        const selectName = checkedSelect.dataset.name\n\n        checkedSelect.closest('.fieldset').querySelector('textarea')\n        .classList.add('--active')\n        checkedSelect.closest('.fieldset').querySelector('textarea')\n          .value = textareaValue(selectName)\n      } else {\n        document.getElementById(`${ checkedSelect.dataset.name }-textarea`)\n        .classList.remove('--active')\n\n        const id = document.getElementById('template-redactor-view').dataset.id\n        const outputs = [...document.getElementsByTagName('select')].reduce((acc, select) => {\n          acc[select.dataset.name] = select.value\n          return acc\n        }, {})\n\n        const { html } = await fetchNewTemplate(\n          `id=${ id }&outputs=` + JSON.stringify(outputs)\n        )\n        viewContainer.innerHTML = html;\n\n        [...document.querySelectorAll('textarea.--active')].forEach(textarea => {\n          const textareaName = textarea.dataset.name\n          onTextareaInput(textareaName, textarea.value)\n        })\n\n        fixPreviewSize('template-redactor-view')\n      }\n    }\n\n    const initRedactor = () => {\n      [...document.getElementsByTagName('textarea')].forEach(textarea => {\n        const name = textarea.dataset.name\n        if (document.getElementById(name)) textarea.value = textareaValue(name)\n        textarea.addEventListener('input', () =>\n          onTextareaInput(name, textarea.value)\n        )\n      });\n\n      allFieldSelects.forEach(select => {\n        if (select.value === 'custom') {\n          select.closest('.fieldset').querySelector('textarea')\n          .classList.add('--active')\n        }\n\n        select.addEventListener('input', () => onSelectInput(select))\n        }\n      )\n    }\n\n    const getTemplate = async (id) => {\n      const getTemplateAndSettings = await fetchTemplateAndSettingsService(id)\n      return getTemplateAndSettings.html || {}\n    }\n\n    getTemplate(viewContainer.dataset.id).then((html) => {\n      viewContainer.classList.add('--active')\n      viewContainer.innerHTML = html\n\n      fixPreviewSize('template-redactor-view')\n\n      initRedactor()\n    })\n\n    const onTextareaInput = (name, value) => {\n      if (document.querySelector(`[data-pp-field=\"${ name }\"]`)) {\n        const fieldContainer = document.querySelector(`[data-pp-field=\"${ name }\"]`)\n        fieldContainer.innerText = value\n      } else if (document.querySelector(`[data-pp-background=\"${ name }\"]`)) {\n        document.querySelector(`[data-pp-background=\"${ name }\"]`).style.backgroundImage = `url(${ value })`\n      }\n    }\n\n    const textareaValue = (name) => {\n      const value = document.querySelector(`[data-pp-field=\"${ name }\"]`)?.innerText ||\n        document.querySelector(`[data-pp-background=\"${ name }\"]`)\n        ?.style.backgroundImage\n        ?.slice(5, -2)\n      return value || ''\n    }\n  }\n})"],"sourceRoot":""}